# Scribble GYB (Generate Your Boilerplate)

The Scribble GYB configuration simplifies boilerplate code generation for ScribbleLabApp projects. By utilizing Python scripting capabilities, GYB provides a flexible approach to reducing repetitive code and improving consistency in Swift, Objective-C, and Objective-C++ projects.

## Table of Contents

1. [Overview](#overview)
2. [Installation](#installation)
   
   2.1 [Add scribble-gyb as git submodule](#option-1-add-scribble-gyb-as-git-submodule)
   
   2.2 [Manually Copy Files](#option-2-manually-copy-files-recommended)

3. [Template Syntax](#template-syntax)
   
   3.1 [Code Blocks](#python-code-blocks)
   
   3.2 [Variables & Placeholders](#variables-and-placeholders)
   
   3.3 [Conditional Logic](#conditional-logic)

## Overview

GYB (Generate Your Boilerplate) is a tool used to generate source code by mixing Python code with template files. It allows developers to avoid redundancy by dynamically generating patterns across different files or languages. Scribble GYB offers a powerful way to ensure clean, consistent code while minimizing manual coding effort.

## Installation

Scribble GYB can be integrated into your project either as a Git submodule or by manually copying files into the project directory.

### Option 1: Add scribble-gyb as git submodule

1. Navigate to your project you want to use scribble-gyb in:

   ```shell
   cd your-project
   ```

2. Clone the repository into your project as a submodule:

    ```shell
    git clone https://github.com/ScribbleLabApp/scribble-gyb.git
    ```
3. Initialize and update the submodule:
    
    ```shell
    git submodule init
    git submodule update
    ```

#### Option 2: Manually Copy Files `(recommended)`

1. Clone the scribble-gyb config repository:

    ```shell
    git clone https://github.com/ScribbleLabApp/scribble-gyb.git
    ```

2. Create a `utils` directory in your project:   
   ```shell
   mkdir -p /path/to/your-project/utils
   ```

3. Copy the gyb runtime preprocessor to your repo

   ```shell
   cp -R scribble-gyb/* /path/to/your-project/utils/
   ```

4. Navigate to your project directory and ensure the files are in place under the utils directory.

## Template Syntax

GYB templates are composed of two primary elements:

   - **Python code blocks** for logic and control flow.
   - **Code placeholders** that insert Python values into generated code.

#### Python Code Blocks

Python code is either written inside `%{ ... }%` or `${...}$` blocks. These blocks are executed at template processing time, allowing for dynamic code generation based on runtime values or logic.

```python
%{
    import random
    random_value = random.randint(1, 100)
}%
```

#### Variables and Placeholders

Python variables defined inside a GYB template can be inserted into Swift, Objective-C, or Objective-C++ code using `${var}` syntax.

```swift
%{
py_greeting = "Hello, GYB!"
}%

public struct Greeting {
    public let message: String = "${py_greeting}"
}

print(Greeting.message) // [OUTPUT] ~> Hello, GYB!
```

```objc
%{
   message = "Hello, GYB ObjC!"
}%

NSString *greeting = @"${message}"; // [OUTPUT] ~> Hello, GYB ObjC!
```

#### Conditional Logic

GYB supports Python control flow constructs such as if statements, enabling conditional code generation.

```swift
%{
   is_logged_in = True
}%

% if is_logged_in:
   print("Welcome back!")
% else:
   print("Please log in.")
% end
```

```objc
%{
   use_large_buffer = True
}%

% if use_large_buffer:
   #define BUFFER_SIZE 1024
% else:
   #define BUFFER_SIZE 256
% end

char buffer[BUFFER_SIZE];
```

### Loops

GYB templates can use Python's `for` loops to generate repeated code blocks. 

```swift
%{
   fields = ['name', 'age', 'email']
}%

struct User {
   % for field in fields:
      var ${field}: String
   % end
}
```

##### Autogenerated Source

```swift
struct User {
   var name: String
   var age: String
   var email: String
}
```

```objc
%{
   methods = ['getName', 'getAge', 'getEmail']
}%

@interface User : NSObject
% for method in methods:
- (NSString *)${method};
% end
@end
```

##### Autogenerated Source

```objc
@interface User : NSObject

- (NSString *)getName;
- (NSString *)getAge;
- (NSString *)getEmail;

@end
```

## Using gyb_utils.py for Shared Utilities


### Running Scribble-GYB

To process your GYB templates and generate Swift code, use the generate-sources.sh script.

#### Generate Source code

GYB is a preprocessor, so you need to run it to generate the actual Swift source code files. Use the `generate-sources.sh` script provided in this repository.

The `generate-sources.sh` script processes GYB templates and generates the corresponding Swift source code files.

##### Running the Script

1. **Ensure GYB Templates are in Place:** Place your GYB template files in the `Sources` or `Tests` directory either with a `.swift.gyb` (Swift), `.m.gyb` (ObjC) or `.mm.gyb` (ObjC++) extension.

2. **Execute the Script:** Run the generate-sources.sh script to generate Swift source files from your GYB templates.

    ```shell
    chmod +x generate-sources.sh
    ./generate-sources.sh
    ```

3. Verify Generated Files: The generated Swift, ObjC or ObjC++ files will be placed in autogenerated subdirectories under Sources or Tests wherever your gyb template is placed.

## Copyright Notice

Copyright (c) 2024, ScribbleLabApp LLC. All rights reserved.

Copyright (c) 2014 - 2024, Apple Inc. -
Swift is a trademark of Apple Inc. All rights reserved.

Copyright (c) 2001-2024, Python Software Foundation -
Python is a trademark of the Python Software Foundation. All rights reserved.

## Support Us

Your support is valuable to us and helps us dedicate more time to enhancing and maintaining this repository. Here's how you can contribute:

‚≠êÔ∏è **Leave a Star:** If you find this repository useful or interesting, please consider leaving a star on GitHub. Your stars help us gain visibility and encourage others in the community to discover and benefit from this work.

‚ú® **Follow us on Social Media:** If you find this repository useful or interesting, please consider leaving a sub on YouTube or Instagram. Your sub help us gain visibility and encourage others in the community to discover and benefit from this work.

üì≤ **Share with Friends:** If you like the idea behind this project, please share it with your friends, colleagues, or anyone who might find it valuable.
